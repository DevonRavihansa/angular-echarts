!function(){"use strict";function t(t,e,a){return function(n,i,r){function o(t){u=t.width||parseInt(r.width)||h||320,c=t.height||parseInt(r.height)||x||240,d.style.width=u+"px",d.style.height=c+"px"}function l(t,a,n){a=angular.extend({showXAxis:!0,showYAxis:!0,showLegend:!0},a);var i=angular.extend({orient:"top",axisLine:{show:!1}},angular.isObject(a.xAxis)?a.xAxis:{}),r=angular.extend({type:"value",orient:"right",scale:!1,axisLine:{show:!1},axisLabel:{formatter:function(t){return e.formatKMBT(t)}}},angular.isObject(a.yAxis)?a.yAxis:{}),o={title:e.getTitle(t,a,n),tooltip:e.getTooltip(t,a,n),legend:e.getLegend(t,a,n),toolbox:angular.extend({show:!1},angular.isObject(a.toolbox)?a.toolbox:{}),xAxis:[angular.extend(i,e.getAxisTicks(t,a,n))],yAxis:[r],graphic:a.graphic&&(angular.isObject(a.graphic)||angular.isArray(a.graphic))?a.graphic:[],series:e.getSeries(t,a,n),visualMap:a.visualMap?a.visualMap:null};return a.showXAxis||angular.forEach(o.xAxis,function(t){t.axisLine={show:!1},t.axisLabel={show:!1},t.axisTick={show:!1}}),a.showYAxis||angular.forEach(o.yAxis,function(t){t.axisLine={show:!1},t.axisLabel={show:!1},t.axisTick={show:!1}}),a.showLegend&&"gauge"!==n||delete o.legend,e.isAxisChart(n)||(delete o.xAxis,delete o.yAxis),a.dataZoom&&(o.dataZoom=angular.extend({show:!0,realtime:!0},a.dataZoom)),a.dataRange&&(o.dataRange=angular.extend({},a.dataRange)),a.polar&&(o.polar=a.polar),a.grid&&(o.grid=a.grid),o}function s(){if(n.data&&n.config){var e;if(o(n.config),g||(g=echarts.init(d)),n.config.event&&(Array.isArray(n.config.event)||(n.config.event=[n.config.event]),Array.isArray(n.config.event)&&n.config.event.forEach(function(t){p[t.type]||(p[t.type]=!0,g.on(t.type,function(e){t.fn(e)}))})),angular.isString(n.data)){if(y)return;y=!0,g.showLoading({text:n.config.loading||"奋力加载中...",textStyle:b}),t.get(n.data).then(function(t){y=!1,g.hideLoading(),t.data.data?(e=l(t.data.data,n.config,a),n.config.forceClear&&g.clear(),e.series.length?(g.setOption(e),g.resize()):g.showLoading({text:n.config.errorMsg||"没有数据",textStyle:b})):g.showLoading({text:n.config.emptyMsg||"数据加载失败",textStyle:b})})}else e=l(n.data,n.config,a),n.config.forceClear&&g.clear(),e.series.length?(g.setOption(e),g.resize()):g.showLoading({text:n.config.errorMsg||"没有数据",textStyle:b});n.chartObj=g}}n.config=n.config||{};var u,c,g,d=i.find("div")[0],f=i.parent()[0],h=f.clientWidth,x=f.clientHeight,p={},y=!1,b={color:"red",fontSize:36,fontWeight:900,fontFamily:"Microsoft Yahei, Arial"};n.$watch(function(){return n.config},function(t){t&&s()},!0),n.$watch(function(){return n.data},function(t){t&&s()},!0)}}for(var e=angular.module("angular-echarts",["angular-echarts.util"]),a=["line","bar","area","pie","donut","gauge","map","radar"],n=0,i=a.length;i>n;n++)!function(a){e.directive(a+"Chart",["$http","util",function(e,n){return{restrict:"EA",template:'<div config="config" data="data"></div>',scope:{config:"=config",data:"=data",chartObj:"=?chartObj"},link:t(e,n,a)}}])}(a[n]);angular.module("angular-echarts.util",[]).factory("util",function(){function t(t){return["pie","donut"].indexOf(t)>-1}function e(t){return["map"].indexOf(t)>-1}function a(t){return["line","bar","area"].indexOf(t)>-1}function n(t,e,a){var n=[];return t[0]&&angular.forEach(t[0].datapoints,function(t){n.push(t.x)}),{type:"category",boundaryGap:"bar"===a,data:n}}function i(n,i,r){var o=[];return angular.forEach(n,function(n){var l=[];angular.forEach(n.datapoints,function(t){l.push(t.y)});var s={type:r||"line",name:n.name,data:l};"area"===r&&(s.type="line",s.itemStyle={normal:{areaStyle:{type:"default"}}}),"gauge"===r&&(s=angular.extend(s,{splitNumber:10,axisLine:{lineStyle:{color:[[.2,"#228b22"],[.8,"#48b"],[1,"#ff4500"]],width:8}},axisTick:{splitNumber:10,length:12,lineStyle:{color:"auto"}},axisLabel:{textStyle:{color:"auto"}},splitLine:{show:!0,length:30,lineStyle:{color:"auto"}},pointer:{width:5},title:{show:!0,offsetCenter:[0,"-40%"],textStyle:{fontWeight:"bolder"}},detail:{formatter:"{value}%",textStyle:{color:"auto",fontWeight:"bolder"}}},i.gauge||{})),a(r)||(s.data=[],angular.forEach(n.datapoints,function(t){s.data.push({value:t.y,name:t.x})})),t(r)&&(s.type="pie",s.center=i.center||["40%","50%"],s.radius=i.radius||"60%","donut"===r?(s.radius=i.radius||["50%","70%"],s=angular.extend(s,{itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}},emphasis:{label:{show:!0,position:"center",textStyle:{fontSize:"50",fontWeight:"bold"}}}}},i.donut||{})):"pie"===r&&(s=angular.extend(s,{itemStyle:{normal:{label:{position:"inner",formatter:function(t){return(+t.percent).toFixed()+"%"}},labelLine:{show:!1}},emphasis:{label:{show:!0,formatter:"{b}\n{d}%"}}}},i.pie||{}))),e(r)&&(s.type="map",s=angular.extend(s,n,i.map||{})),i.stack&&(s.stack="total"),"radar"===r&&(s.data=n.data),o.push(s)}),o}function r(e,a,n){var i={data:[]};return t(n)?(e[0]&&angular.forEach(e[0].datapoints,function(t){i.data.push(t.x)}),i.orient="verticle",i.x="right",i.y="center"):"map"===n?i={}:(angular.forEach(e,function(t){i.data.push(t.name)}),i.orient="horizontal"),angular.extend(i,a.legend||{})}function o(t,e,a){var n={};switch(a){case"line":case"area":n.trigger="axis";break;case"pie":case"donut":case"bar":case"map":case"gauge":n.trigger="item"}return"pie"===a&&(n.formatter="{a} <br/>{b}: {c} ({d}%)"),"map"===a&&(n.formatter="{b}"),angular.extend(n,angular.isObject(e.tooltip)?e.tooltip:{})}function l(e,a,n){return angular.isObject(a.title)?a.title:t(n)?null:{text:a.title,subtext:a.subtitle||"",x:50}}function s(t,e){return e||(e=function(t){return Math.round(100*t)/100}),t=Math.abs(t),t>=1e12?e(t/1e12)+"T":t>=1e9?e(t/1e9)+"B":t>=1e6?e(t/1e6)+"M":t>=1e3?e(t/1e3)+"K":1>t&&t>0?e(t):0===t?"":e(t)}return{isPieChart:t,isAxisChart:a,getAxisTicks:n,getSeries:i,getLegend:r,getTooltip:o,getTitle:l,formatKMBT:s}})}();